{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stephangilli/projects/besuchernachweis/frontend/pages/[locale]/visitor/register.tsx\";\n\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport useRestClient from '../../../hooks/useRestClient';\nimport Register from '../../../components/RegisterVisit';\n\nvar Visitors = function Visitors() {\n  var _useRestClient = useRestClient(),\n      client = _useRestClient.client,\n      setIsLoading = _useRestClient.setIsLoading;\n\n  return __jsx(Register, {\n    createNewVisitor: function _callee(props) {\n      var res;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(client && setIsLoading)) {\n                _context.next = 9;\n                break;\n              }\n\n              setIsLoading(true);\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(client.postBesucher({\n                person: {\n                  name: props.name,\n                  vorname: props.firstName,\n                  email: props.email,\n                  telefon: props.phone\n                },\n                gesundheitsstatus: 'gesund'\n              }));\n\n            case 4:\n              res = _context.sent;\n\n              if (!(res && res.id)) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(client.postBesuch({\n                besucher: [res.id],\n                raeume: props.rooms\n              }));\n\n            case 8:\n              setIsLoading(false);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default Visitors;","map":{"version":3,"sources":["/Users/stephangilli/projects/besuchernachweis/frontend/pages/[locale]/visitor/register.tsx"],"names":["React","useRestClient","Register","Visitors","client","setIsLoading","props","postBesucher","person","name","vorname","firstName","email","telefon","phone","gesundheitsstatus","res","id","postBesuch","besucher","raeume","rooms"],"mappings":";;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,QAAP,MAAqB,mCAArB;;AAEA,IAAMC,QAAiC,GAAG,SAApCA,QAAoC,GAAM;AAAA,uBACbF,aAAa,EADA;AAAA,MACtCG,MADsC,kBACtCA,MADsC;AAAA,MAC9BC,YAD8B,kBAC9BA,YAD8B;;AAE9C,SACE,MAAC,QAAD;AACE,IAAA,gBAAgB,EAAE,iBAAMC,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACZF,MAAM,IAAIC,YADE;AAAA;AAAA;AAAA;;AAEdA,cAAAA,YAAY,CAAC,IAAD,CAAZ;AAFc;AAAA,+CAGID,MAAM,CAACG,YAAP,CAAoB;AACpCC,gBAAAA,MAAM,EAAE;AACNC,kBAAAA,IAAI,EAAEH,KAAK,CAACG,IADN;AAENC,kBAAAA,OAAO,EAAEJ,KAAK,CAACK,SAFT;AAGNC,kBAAAA,KAAK,EAAEN,KAAK,CAACM,KAHP;AAINC,kBAAAA,OAAO,EAAEP,KAAK,CAACQ;AAJT,iBAD4B;AAOpCC,gBAAAA,iBAAiB,EAAE;AAPiB,eAApB,CAHJ;;AAAA;AAGRC,cAAAA,GAHQ;;AAAA,oBAYVA,GAAG,IAAIA,GAAG,CAACC,EAZD;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAaNb,MAAM,CAACc,UAAP,CAAkB;AACtBC,gBAAAA,QAAQ,EAAE,CAACH,GAAG,CAACC,EAAL,CADY;AAEtBG,gBAAAA,MAAM,EAAEd,KAAK,CAACe;AAFQ,eAAlB,CAbM;;AAAA;AAkBdhB,cAAAA,YAAY,CAAC,KAAD,CAAZ;;AAlBc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAyBD,CA3BD;;AA6BA,eAAeF,QAAf","sourcesContent":["import * as React from 'react';\n\nimport useRestClient from '../../../hooks/useRestClient';\nimport Register from '../../../components/RegisterVisit';\n\nconst Visitors: React.FunctionComponent = () => {\n  const { client, setIsLoading } = useRestClient();\n  return (\n    <Register\n      createNewVisitor={async props => {\n        if (client && setIsLoading) {\n          setIsLoading(true);\n          const res = await client.postBesucher({\n            person: {\n              name: props.name,\n              vorname: props.firstName,\n              email: props.email,\n              telefon: props.phone,\n            },\n            gesundheitsstatus: 'gesund',\n          });\n          if (res && res.id) {\n            await client.postBesuch({\n              besucher: [res.id],\n              raeume: props.rooms,\n            });\n          }\n          setIsLoading(false);\n        }\n      }}\n    />\n  );\n};\n\nexport default Visitors;\n"]},"metadata":{},"sourceType":"module"}