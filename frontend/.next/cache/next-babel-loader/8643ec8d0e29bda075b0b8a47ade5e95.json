{"ast":null,"code":"var _jsxFileName = \"/Users/stephangilli/projects/besuchernachweis/frontend/components/Table/index.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow, Toolbar, Typography, Paper, IconButton, Checkbox, Tooltip } from '@material-ui/core';\nimport grey from '@material-ui/core/colors/grey';\nimport useTranslations from '../../hooks/useTranslations';\nimport useStyles, { useToolbarStyles } from './style';\n\nfunction formatValue(val) {\n  if (Array.isArray(val)) return val.join(', ');\n  return val;\n}\n\nconst EnhancedTable = ({\n  rows,\n  rowsPerPageOptions,\n  count,\n  rowsPerPage,\n  page,\n  onChangePage,\n  onChangeRowsPerPage,\n  onRowClick,\n  uniqueId,\n  toolbarSettings\n}) => {\n  if (rows.length === 0) return null; // state\n\n  const [selected, setSelected] = React.useState([]); // hooks\n\n  const {\n    t\n  } = useTranslations();\n  const classes = useStyles();\n  const cells = Object.keys(rows[0]).filter(r => r !== uniqueId).map(r => {\n    return {\n      key: r,\n      label: t(r)\n    };\n  });\n\n  const EnhancedTableHead = () => {\n    const numSelected = selected.length;\n    return __jsx(TableHead, {\n      style: {\n        background: grey[200]\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, __jsx(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, __jsx(TableCell, {\n      padding: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, !onRowClick && __jsx(Checkbox, {\n      indeterminate: numSelected > 0 && numSelected < rowsPerPage,\n      checked: rowsPerPage > 0 && numSelected === rowsPerPage,\n      onChange: event => {\n        if (event.target.checked) setSelected(rows.map(row => row[uniqueId]));\n        setSelected([]);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }\n    })), cells.map(cell => __jsx(TableCell, {\n      key: cell.key,\n      align: \"left\",\n      padding: \"default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, cell.label))));\n  };\n\n  const EnhancedTableToolbar = () => {\n    const numSelected = selected.length;\n    const classes = useToolbarStyles();\n    return __jsx(Toolbar, {\n      className: clsx(classes.root, {\n        [classes.highlight]: numSelected > 0\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, numSelected > 0 ? __jsx(Typography, {\n      className: classes.title,\n      color: \"inherit\",\n      variant: \"subtitle1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, numSelected, \" \", t('table-general-selected')) : __jsx(Typography, {\n      className: classes.title,\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, toolbarSettings.title), !onRowClick && __jsx(React.Fragment, null, toolbarSettings.tooltipSelected && numSelected > 0 && __jsx(Tooltip, {\n      title: toolbarSettings.tooltipSelected.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, __jsx(IconButton, {\n      onClick: () => toolbarSettings.tooltipSelected.onClick(selected),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, toolbarSettings.tooltipSelected.icon)), toolbarSettings.tooltipUnselected && numSelected === 0 && __jsx(Tooltip, {\n      title: toolbarSettings.tooltipUnselected.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, __jsx(IconButton, {\n      onClick: () => toolbarSettings.tooltipUnselected.onClick(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, toolbarSettings.tooltipUnselected.icon))));\n  };\n\n  const EnhancedTableCell = ({\n    children\n  }) => {\n    const classes = useStyles();\n    return __jsx(TableCell, {\n      className: classes.cell,\n      component: \"th\",\n      scope: \"row\",\n      padding: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }\n    }, children);\n  };\n\n  const handleRowClick = id => {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n    if (selectedIndex === -1) newSelected = newSelected.concat(selected, id);else if (selectedIndex === 0) newSelected = newSelected.concat(selected.slice(1));else if (selectedIndex === selected.length - 1) newSelected = newSelected.concat(selected.slice(0, -1));else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n    setSelected(newSelected);\n  };\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, __jsx(Paper, {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, __jsx(EnhancedTableToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }), __jsx(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    className: classes.table,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 11\n    }\n  }, __jsx(EnhancedTableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }), __jsx(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, rows.map((row, index) => {\n    const checked = selected.indexOf(row[uniqueId]) !== -1;\n    return __jsx(TableRow, {\n      hover: true,\n      role: \"checkbox\",\n      tabIndex: -1,\n      key: index,\n      onClick: () => {\n        const id = row[uniqueId];\n        if (onRowClick) onRowClick(id);else handleRowClick(id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, !onRowClick && __jsx(TableCell, {\n      padding: \"checkbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }, __jsx(Checkbox, {\n      checked: checked,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    })), cells.map((c, index) => {\n      if (c.key !== uniqueId) {\n        // @ts-ignore\n        const value = formatValue(row[c.key]);\n        return __jsx(EnhancedTableCell, {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 27\n          }\n        }, value);\n      }\n    }));\n  })))), __jsx(TablePagination, {\n    rowsPerPageOptions: rowsPerPageOptions,\n    labelRowsPerPage: t('table-general-rows-per-page'),\n    count: count,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    component: \"div\",\n    onChangePage: onChangePage,\n    onChangeRowsPerPage: onChangeRowsPerPage,\n    labelDisplayedRows: ({\n      from,\n      to,\n      count\n    }) => `${from}-${to} ${t('table-general-displayed-rows-of')} ${count}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default EnhancedTable;","map":{"version":3,"sources":["/Users/stephangilli/projects/besuchernachweis/frontend/components/Table/index.tsx"],"names":["React","clsx","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Toolbar","Typography","Paper","IconButton","Checkbox","Tooltip","grey","useTranslations","useStyles","useToolbarStyles","formatValue","val","Array","isArray","join","EnhancedTable","rows","rowsPerPageOptions","count","rowsPerPage","page","onChangePage","onChangeRowsPerPage","onRowClick","uniqueId","toolbarSettings","length","selected","setSelected","useState","t","classes","cells","Object","keys","filter","r","map","key","label","EnhancedTableHead","numSelected","background","event","target","checked","row","cell","EnhancedTableToolbar","root","highlight","title","tooltipSelected","onClick","icon","tooltipUnselected","EnhancedTableCell","children","handleRowClick","id","selectedIndex","indexOf","newSelected","concat","slice","paper","table","index","c","value","from","to"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport clsx from 'clsx';\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  Toolbar,\n  Typography,\n  Paper,\n  IconButton,\n  Checkbox,\n  Tooltip,\n} from '@material-ui/core';\nimport grey from '@material-ui/core/colors/grey';\nimport useTranslations from '../../hooks/useTranslations';\nimport { EnhancedTableProps } from '../../types';\nimport useStyles, { useToolbarStyles } from './style';\n\nfunction formatValue(val: string | number | Array<any>) {\n  if (Array.isArray(val)) return val.join(', ');\n  return val;\n}\n\nconst EnhancedTable: React.FunctionComponent<EnhancedTableProps> = ({\n  rows,\n  rowsPerPageOptions,\n  count,\n  rowsPerPage,\n  page,\n  onChangePage,\n  onChangeRowsPerPage,\n  onRowClick,\n  uniqueId,\n  toolbarSettings,\n}) => {\n  if (rows.length === 0) return null;\n  // state\n  const [selected, setSelected] = React.useState<Array<string | number>>([]);\n\n  // hooks\n  const { t } = useTranslations();\n  const classes = useStyles();\n  const cells = Object.keys(rows[0])\n    .filter(r => r !== uniqueId)\n    .map(r => {\n      return { key: r, label: t(r) };\n    });\n\n  const EnhancedTableHead: React.FunctionComponent = () => {\n    const numSelected = selected.length;\n    return (\n      <TableHead style={{ background: grey[200] }}>\n        <TableRow>\n          <TableCell padding=\"checkbox\">\n            {!onRowClick && (\n              <Checkbox\n                indeterminate={numSelected > 0 && numSelected < rowsPerPage}\n                checked={rowsPerPage > 0 && numSelected === rowsPerPage}\n                onChange={event => {\n                  if (event.target.checked)\n                    setSelected(rows.map(row => row[uniqueId]));\n                  setSelected([]);\n                }}\n              />\n            )}\n          </TableCell>\n          {cells.map(cell => (\n            <TableCell key={cell.key} align=\"left\" padding=\"default\">\n              {cell.label}\n            </TableCell>\n          ))}\n        </TableRow>\n      </TableHead>\n    );\n  };\n\n  const EnhancedTableToolbar: React.FunctionComponent = () => {\n    const numSelected = selected.length;\n    const classes = useToolbarStyles();\n    return (\n      <Toolbar\n        className={clsx(classes.root, {\n          [classes.highlight]: numSelected > 0,\n        })}\n      >\n        {numSelected > 0 ? (\n          <Typography\n            className={classes.title}\n            color=\"inherit\"\n            variant=\"subtitle1\"\n          >\n            {numSelected} {t('table-general-selected')}\n          </Typography>\n        ) : (\n          <Typography className={classes.title} variant=\"h6\">\n            {toolbarSettings.title}\n          </Typography>\n        )}\n        {!onRowClick && (\n          <>\n            {toolbarSettings.tooltipSelected && numSelected > 0 && (\n              <Tooltip title={toolbarSettings.tooltipSelected.title}>\n                <IconButton\n                  onClick={() =>\n                    toolbarSettings.tooltipSelected!.onClick(selected)\n                  }\n                >\n                  {toolbarSettings.tooltipSelected.icon}\n                </IconButton>\n              </Tooltip>\n            )}\n            {toolbarSettings.tooltipUnselected && numSelected === 0 && (\n              <Tooltip title={toolbarSettings.tooltipUnselected.title}>\n                <IconButton\n                  onClick={() => toolbarSettings.tooltipUnselected!.onClick()}\n                >\n                  {toolbarSettings.tooltipUnselected.icon}\n                </IconButton>\n              </Tooltip>\n            )}\n          </>\n        )}\n      </Toolbar>\n    );\n  };\n\n  const EnhancedTableCell: React.FunctionComponent = ({ children }) => {\n    const classes = useStyles();\n    return (\n      <TableCell\n        className={classes.cell}\n        component=\"th\"\n        scope=\"row\"\n        padding=\"none\"\n      >\n        {children}\n      </TableCell>\n    );\n  };\n\n  const handleRowClick = (id: string | number) => {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected: Array<string | number> = [];\n    if (selectedIndex === -1) newSelected = newSelected.concat(selected, id);\n    else if (selectedIndex === 0)\n      newSelected = newSelected.concat(selected.slice(1));\n    else if (selectedIndex === selected.length - 1)\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n    setSelected(newSelected);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar />\n        <TableContainer>\n          <Table className={classes.table}>\n            <EnhancedTableHead />\n            <TableBody>\n              {rows.map((row, index) => {\n                const checked = selected.indexOf(row[uniqueId]) !== -1;\n                return (\n                  <TableRow\n                    hover\n                    role=\"checkbox\"\n                    tabIndex={-1}\n                    key={index}\n                    onClick={() => {\n                      const id = row[uniqueId];\n                      if (onRowClick) onRowClick(id);\n                      else handleRowClick(id);\n                    }}\n                  >\n                    {!onRowClick && (\n                      <TableCell padding=\"checkbox\">\n                        <Checkbox checked={checked} />\n                      </TableCell>\n                    )}\n                    {cells.map((c, index) => {\n                      if (c.key !== uniqueId) {\n                        // @ts-ignore\n                        const value = formatValue(row[c.key]);\n                        return (\n                          <EnhancedTableCell key={index}>\n                            {value}\n                          </EnhancedTableCell>\n                        );\n                      }\n                    })}\n                  </TableRow>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={rowsPerPageOptions}\n          labelRowsPerPage={t('table-general-rows-per-page')}\n          count={count}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          component=\"div\"\n          onChangePage={onChangePage}\n          onChangeRowsPerPage={onChangeRowsPerPage}\n          labelDisplayedRows={({ from, to, count }) =>\n            `${from}-${to} ${t('table-general-displayed-rows-of')} ${count}`\n          }\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport default EnhancedTable;\n"]},"metadata":{},"sourceType":"module"}