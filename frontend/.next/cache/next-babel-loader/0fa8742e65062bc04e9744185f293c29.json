{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stephangilli/projects/besuchernachweis/frontend/components/RegisterVisit/index.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react';\nimport { Grid, Typography, Paper, Input, InputLabel, FormControl, Select, MenuItem, Button } from '@material-ui/core';\nimport InputIcon from '@material-ui/icons/Input';\nimport Table from '../Table';\nimport useRestClient from '../../hooks/useRestClient';\nimport useTableSearch from '../../hooks/useTableSearch';\nimport useTranslations from '../../hooks/useTranslations';\nimport useStyles from './style';\nvar INITIAL_FORM_STATE = {\n  id: null,\n  firstName: '',\n  name: '',\n  email: '',\n  phone: '',\n  building: 0,\n  rooms: [],\n  permissionGranted: false\n};\n\nvar RegisterVisit = function RegisterVisit() {\n  // hooks\n  var classes = useStyles();\n  var reducer = useTableSearch();\n\n  var _useTranslations = useTranslations(),\n      t = _useTranslations.t;\n\n  var _useRestClient = useRestClient(),\n      client = _useRestClient.client,\n      setIsLoading = _useRestClient.setIsLoading,\n      setHasError = _useRestClient.setHasError;\n\n  if (!reducer) return null;\n  var state = reducer.state,\n      dispatch = reducer.dispatch;\n\n  function getBesucherByFilter() {\n    var res;\n    return _regeneratorRuntime.async(function getBesucherByFilter$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(client.getBesucherByFilter({\n              skip: state.skip,\n              take: state.limit\n            }));\n\n          case 2:\n            res = _context.sent;\n            if (res) dispatch({\n              type: 'setRows',\n              payload: {\n                rows: res.map(function (r) {\n                  return {\n                    id: r.id,\n                    vorname: 'Max',\n                    nachname: 'Mustermann',\n                    email: 'max@mustermann.de'\n                  };\n                }),\n                count: res.length\n              }\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  React.useEffect(function () {\n    getBesucherByFilter();\n  }, [state.page, state.limit]);\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      buildings = _React$useState2[0],\n      setBuildings = _React$useState2[1];\n\n  React.useEffect(function () {\n    function getGebauede() {\n      var res;\n      return _regeneratorRuntime.async(function getGebauede$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(client.getGebauede());\n\n            case 2:\n              res = _context2.sent;\n              if (res) setBuildings(res);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getGebauede();\n  }, []);\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      rooms = _React$useState4[0],\n      setRooms = _React$useState4[1];\n\n  var _React$useState5 = React.useState(INITIAL_FORM_STATE),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      formState = _React$useState6[0],\n      setFormState = _React$useState6[1];\n\n  function registerBesuch() {\n    var id, _res, res;\n\n    return _regeneratorRuntime.async(function registerBesuch$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setIsLoading(true);\n            id = formState.id;\n            _context3.prev = 2;\n\n            if (id) {\n              _context3.next = 11;\n              break;\n            }\n\n            _context3.next = 6;\n            return _regeneratorRuntime.awrap(client.registerBesucher({\n              person: {\n                name: formState.name,\n                vorname: formState.firstName,\n                email: formState.email,\n                telefon: formState.phone\n              },\n              gesundheitsstatus: 'gesund'\n            }));\n\n          case 6:\n            _res = _context3.sent;\n\n            if (!(_res && _res.id)) {\n              _context3.next = 11;\n              break;\n            }\n\n            id = _res.id;\n            _context3.next = 11;\n            return _regeneratorRuntime.awrap(getBesucherByFilter());\n\n          case 11:\n            _context3.next = 13;\n            return _regeneratorRuntime.awrap(client.registerBesuch({\n              besucher: [id],\n              raeume: formState.rooms.map(function (r) {\n                return r.id;\n              })\n            }));\n\n          case 13:\n            res = _context3.sent;\n            console.log(res);\n            setFormState(INITIAL_FORM_STATE);\n            _context3.next = 21;\n            break;\n\n          case 18:\n            _context3.prev = 18;\n            _context3.t0 = _context3[\"catch\"](2);\n            setHasError(true);\n\n          case 21:\n            setIsLoading(false);\n\n          case 22:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[2, 18]], Promise);\n  }\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, t('administration')), __jsx(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, t('visitor-register'))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, \"Registrieter Besucher\"), __jsx(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, \"Besucher ausw\\xE4hlen\"))), __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, __jsx(Paper, {\n    className: classes.contentContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    className: classes.input,\n    placeholder: t('register-first-name'),\n    value: formState.firstName,\n    onChange: function onChange(event) {\n      return setFormState(_objectSpread({}, formState, {\n        firstName: event.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    className: classes.input,\n    placeholder: t('register-name'),\n    value: formState.name,\n    onChange: function onChange(event) {\n      return setFormState(_objectSpread({}, formState, {\n        name: event.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }))), __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    className: classes.input,\n    type: \"email\",\n    placeholder: t('register-email'),\n    value: formState.email,\n    onChange: function onChange(event) {\n      return setFormState(_objectSpread({}, formState, {\n        email: event.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, __jsx(Input, {\n    className: classes.input,\n    placeholder: t('register-phone'),\n    value: formState.phone,\n    onChange: function onChange(event) {\n      return setFormState(_objectSpread({}, formState, {\n        phone: event.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }))), __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, __jsx(FormControl, {\n    style: {\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, __jsx(InputLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, \"Geb\\xE4ude\"), __jsx(Select, {\n    value: formState.building,\n    onChange: function onChange(event) {\n      setFormState(_objectSpread({}, formState, {\n        building: event.target.value\n      }));\n      var rooms = buildings.filter(function (b) {\n        return b.id === event.target.value;\n      }).map(function (v) {\n        return v.raeume;\n      });\n      if (rooms) setRooms(rooms[0]);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, buildings && buildings.length > 0 && buildings.map(function (building, index) {\n    return __jsx(MenuItem, {\n      key: index,\n      value: building.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 25\n      }\n    }, building.bezeichnung);\n  })))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, __jsx(FormControl, {\n    style: {\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, __jsx(InputLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }, t('property-rooms')), rooms && rooms.length > 0 && __jsx(Select, {\n    value: formState.rooms,\n    onChange: function onChange(event) {\n      setFormState(_objectSpread({}, formState, {\n        rooms: event.target.value\n      }));\n    },\n    input: __jsx(Input, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 30\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 21\n    }\n  }, rooms.map(function (room, index) {\n    return __jsx(MenuItem, {\n      key: index,\n      value: room.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 27\n      }\n    }, room.bezeichnung);\n  }))))), __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              return _context4.abrupt(\"return\", registerBesuch());\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 17\n    }\n  }, t('register')))))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    rows: state.rows,\n    rowsPerPageOptions: [25, 50, 100],\n    count: state.count,\n    rowsPerPage: state.limit,\n    page: state.page,\n    onChangePage: function onChangePage(_, newPage) {\n      var newSkip = newPage > state.page ? state.skip + state.limit : state.skip - state.limit;\n      dispatch({\n        type: 'changePage',\n        payload: {\n          skip: newSkip,\n          page: newPage\n        }\n      });\n    },\n    onChangeRowsPerPage: function onChangeRowsPerPage(event) {\n      var limit = Number(event.target.value);\n      dispatch({\n        type: 'changeRowsPerPage',\n        payload: {\n          limit: limit\n        }\n      });\n    },\n    uniqueId: \"id\",\n    toolbarSettings: {\n      title: 'Besucher',\n      tooltipSelected: {\n        title: 'Besucher auswählen',\n        icon: __jsx(InputIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 23\n          }\n        }),\n        onClick: function onClick(ids) {\n          if (ids.length) {\n            var id = ids[0];\n            var user = state.rows.filter(function (u) {\n              return u.id === id;\n            });\n            if (user.length) setFormState({\n              id: user[0].id,\n              firstName: user[0].vorname,\n              name: user[0].nachname,\n              email: user[0].email\n            });\n          }\n        }\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default RegisterVisit;","map":{"version":3,"sources":["/Users/stephangilli/projects/besuchernachweis/frontend/components/RegisterVisit/index.tsx"],"names":["React","Grid","Typography","Paper","Input","InputLabel","FormControl","Select","MenuItem","Button","InputIcon","Table","useRestClient","useTableSearch","useTranslations","useStyles","INITIAL_FORM_STATE","id","firstName","name","email","phone","building","rooms","permissionGranted","RegisterVisit","classes","reducer","t","client","setIsLoading","setHasError","state","dispatch","getBesucherByFilter","skip","take","limit","res","type","payload","rows","map","r","vorname","nachname","count","length","useEffect","page","useState","buildings","setBuildings","getGebauede","setRooms","formState","setFormState","registerBesuch","registerBesucher","person","telefon","gesundheitsstatus","besucher","raeume","console","log","root","contentContainer","input","event","target","value","width","filter","b","v","index","bezeichnung","room","_","newPage","newSkip","Number","title","tooltipSelected","icon","onClick","ids","user","u"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Grid,\n  Typography,\n  Paper,\n  Input,\n  InputLabel,\n  FormControl,\n  Select,\n  MenuItem,\n  Button,\n} from '@material-ui/core';\nimport InputIcon from '@material-ui/icons/Input';\nimport Table from '../Table';\nimport useRestClient from '../../hooks/useRestClient';\nimport useTableSearch from '../../hooks/useTableSearch';\nimport useTranslations from '../../hooks/useTranslations';\nimport useStyles from './style';\n\nconst INITIAL_FORM_STATE = {\n  id: null,\n  firstName: '',\n  name: '',\n  email: '',\n  phone: '',\n  building: 0,\n  rooms: [],\n  permissionGranted: false,\n};\n\nconst RegisterVisit: React.FunctionComponent = () => {\n  // hooks\n  const classes = useStyles();\n  const reducer = useTableSearch<any>();\n  const { t } = useTranslations();\n  const { client, setIsLoading, setHasError } = useRestClient();\n  if (!reducer) return null;\n\n  const { state, dispatch } = reducer;\n\n  async function getBesucherByFilter() {\n    const res = await client.getBesucherByFilter({\n      skip: state.skip,\n      take: state.limit,\n    });\n\n    if (res)\n      dispatch({\n        type: 'setRows',\n        payload: {\n          rows: res.map((r: any) => ({\n            id: r.id,\n            vorname: 'Max',\n            nachname: 'Mustermann',\n            email: 'max@mustermann.de',\n          })),\n          count: res.length,\n        },\n      });\n  }\n\n  React.useEffect(() => {\n    getBesucherByFilter();\n  }, [state.page, state.limit]);\n\n  const [buildings, setBuildings] = React.useState<any>(null);\n\n  React.useEffect(() => {\n    async function getGebauede() {\n      const res = await client.getGebauede();\n      if (res) setBuildings(res);\n    }\n    getGebauede();\n  }, []);\n\n  const [rooms, setRooms] = React.useState<any>([]);\n  const [formState, setFormState] = React.useState<any>(INITIAL_FORM_STATE);\n\n  async function registerBesuch() {\n    setIsLoading(true);\n    let id: number = formState.id;\n    try {\n      if (!id) {\n        const res = await client.registerBesucher({\n          person: {\n            name: formState.name,\n            vorname: formState.firstName,\n            email: formState.email,\n            telefon: formState.phone,\n          },\n          gesundheitsstatus: 'gesund',\n        });\n        if (res && res.id) {\n          id = res.id;\n          await getBesucherByFilter();\n        }\n      }\n      const res = await client.registerBesuch({\n        besucher: [id],\n        raeume: formState.rooms.map(r => r.id),\n      });\n\n      console.log(res);\n      setFormState(INITIAL_FORM_STATE);\n    } catch (error) {\n      setHasError(true);\n    }\n    setIsLoading(false);\n  }\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Typography variant=\"body1\">{t('administration')}</Typography>\n          <Typography variant=\"h6\">{t('visitor-register')}</Typography>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Typography variant=\"body1\">Registrieter Besucher</Typography>\n          <Typography variant=\"h6\">Besucher auswählen</Typography>\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Paper className={classes.contentContainer}>\n            <Grid container spacing={4}>\n              <Grid item xs={12} sm={6}>\n                <Input\n                  className={classes.input}\n                  placeholder={t('register-first-name')}\n                  value={formState.firstName}\n                  onChange={event =>\n                    setFormState({\n                      ...formState,\n                      firstName: event.target.value,\n                    })\n                  }\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Input\n                  className={classes.input}\n                  placeholder={t('register-name')}\n                  value={formState.name}\n                  onChange={event =>\n                    setFormState({ ...formState, name: event.target.value })\n                  }\n                />\n              </Grid>\n            </Grid>\n            <Grid container spacing={4}>\n              <Grid item xs={12} sm={6}>\n                <Input\n                  className={classes.input}\n                  type=\"email\"\n                  placeholder={t('register-email')}\n                  value={formState.email}\n                  onChange={event =>\n                    setFormState({ ...formState, email: event.target.value })\n                  }\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <Input\n                  className={classes.input}\n                  placeholder={t('register-phone')}\n                  value={formState.phone}\n                  onChange={event =>\n                    setFormState({ ...formState, phone: event.target.value })\n                  }\n                />\n              </Grid>\n            </Grid>\n            <Grid container spacing={4}>\n              <Grid item xs={12} sm={6}>\n                <FormControl style={{ width: '100%' }}>\n                  <InputLabel>Gebäude</InputLabel>\n                  <Select\n                    value={formState.building}\n                    onChange={event => {\n                      setFormState({\n                        ...formState,\n                        building: event.target.value,\n                      });\n                      const rooms = buildings\n                        .filter((b: any) => b.id === event.target.value)\n                        .map((v: any) => v.raeume);\n                      if (rooms) setRooms(rooms[0]);\n                    }}\n                  >\n                    {buildings &&\n                      buildings.length > 0 &&\n                      buildings.map((building: any, index: number) => (\n                        <MenuItem key={index} value={building.id}>\n                          {building.bezeichnung}\n                        </MenuItem>\n                      ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <FormControl style={{ width: '100%' }}>\n                  <InputLabel>{t('property-rooms')}</InputLabel>\n                  {rooms && rooms.length > 0 && (\n                    <Select\n                      value={formState.rooms}\n                      onChange={event => {\n                        setFormState({\n                          ...formState,\n                          rooms: event.target.value,\n                        });\n                      }}\n                      input={<Input />}\n                    >\n                      {rooms.map((room: any, index: number) => {\n                        return (\n                          <MenuItem key={index} value={room.id}>\n                            {room.bezeichnung}\n                          </MenuItem>\n                        );\n                      })}\n                    </Select>\n                  )}\n                </FormControl>\n              </Grid>\n            </Grid>\n            <Grid container spacing={4}>\n              <Grid item xs={12} sm={6}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={async () => registerBesuch()}\n                >\n                  {t('register')}\n                </Button>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Table\n            rows={state.rows}\n            rowsPerPageOptions={[25, 50, 100]}\n            count={state.count}\n            rowsPerPage={state.limit}\n            page={state.page}\n            onChangePage={(_: any, newPage: number) => {\n              const newSkip =\n                newPage > state.page\n                  ? state.skip + state.limit\n                  : state.skip - state.limit;\n              dispatch({\n                type: 'changePage',\n                payload: { skip: newSkip, page: newPage },\n              });\n            }}\n            onChangeRowsPerPage={event => {\n              const limit = Number(event.target.value);\n              dispatch({ type: 'changeRowsPerPage', payload: { limit } });\n            }}\n            uniqueId=\"id\"\n            toolbarSettings={{\n              title: 'Besucher',\n              tooltipSelected: {\n                title: 'Besucher auswählen',\n                icon: <InputIcon />,\n                onClick: ids => {\n                  if (ids.length) {\n                    const id = ids[0];\n                    const user = state.rows.filter(u => u.id === id);\n                    if (user.length)\n                      setFormState({\n                        id: user[0].id,\n                        firstName: user[0].vorname,\n                        name: user[0].nachname,\n                        email: user[0].email,\n                      });\n                  }\n                },\n              },\n            }}\n          />\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default RegisterVisit;\n"]},"metadata":{},"sourceType":"module"}