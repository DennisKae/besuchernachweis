{"ast":null,"code":"export const defaultLocale = 'en';\nexport const locales = ['en', 'de'];\nconst DEFAULT_LOCALE = 'en';\nexport function isLocale(tested) {\n  return locales.some(locale => locale === tested);\n}\nexport function detectLocale(req) {\n  if (req) {\n    const acceptLanugage = req.headers['accept-language'];\n\n    if (acceptLanugage) {\n      const requestedLocales = acceptLanugage.split(',').map(part => {\n        const [locale, priority] = part.trim().split(';q=');\n        return {\n          locale,\n          priority: parseInt(priority)\n        };\n      });\n      requestedLocales.sort((a, b) => b.priority - a.priority);\n      const found = requestedLocales.find(({\n        locale\n      }) => locale !== '*');\n      if (!found) return DEFAULT_LOCALE;else {\n        const locale = found.locale.split('-')[0];\n        if (locales.includes(locale)) return locale;else return DEFAULT_LOCALE;\n      }\n    }\n  }\n\n  if (typeof navigator !== 'undefined') {\n    const locale = navigator.languages[0].split('-')[0];\n    if (locale && locales.includes(locale)) return locale;else return DEFAULT_LOCALE;\n  }\n\n  return DEFAULT_LOCALE;\n}","map":null,"metadata":{},"sourceType":"module"}