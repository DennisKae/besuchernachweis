{"ast":null,"code":"var _jsxFileName = \"/Users/stephangilli/projects/besuchernachweis/frontend/pages/[locale]/visitor/register.tsx\";\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport Alert from '@material-ui/lab/Alert';\nimport useRestClient from '../../../hooks/useRestClient';\nimport Register from '../../../components/RegisterVisit';\n\nconst Visitors = () => {\n  const {\n    client,\n    setIsLoading,\n    setHasError\n  } = useRestClient();\n  const [createStatus, setCreateStatus] = React.useState('');\n  const [gebaeude, setGebaeude] = React.useState(null);\n  React.useEffect(() => {\n    async function getGebaude() {\n      if (client) {\n        const res = await client.getGebauede();\n        if (res) setGebaeude(res);\n      }\n    }\n\n    getGebaude();\n  }, []);\n  return __jsx(React.Fragment, null, createStauts === 'success' && __jsx(Alert, {\n    severity: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, \"Besuch erfolgreich angelegt.\"), __jsx(Register, {\n    buildings: gebaeude,\n    createNewVisitor: async props => {\n      if (client) {\n        setIsLoading(true);\n\n        try {\n          const res = await client.postBesucher({\n            person: {\n              name: props.name,\n              vorname: props.firstName,\n              email: props.email,\n              telefon: props.phone\n            },\n            gesundheitsstatus: 'gesund'\n          });\n\n          if (res && res.id) {\n            await client.postBesuch({\n              besucher: [res.id],\n              raeume: props.rooms\n            });\n          }\n\n          setIsLoading(false);\n          setCreateStatus('success');\n        } catch (error) {\n          setCreateStatus('error');\n          setHasError(true);\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Visitors;","map":{"version":3,"sources":["/Users/stephangilli/projects/besuchernachweis/frontend/pages/[locale]/visitor/register.tsx"],"names":["React","Alert","useRestClient","Register","Visitors","client","setIsLoading","setHasError","createStatus","setCreateStatus","useState","gebaeude","setGebaeude","useEffect","getGebaude","res","getGebauede","createStauts","props","postBesucher","person","name","vorname","firstName","email","telefon","phone","gesundheitsstatus","id","postBesuch","besucher","raeume","rooms","error"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,QAAP,MAAqB,mCAArB;;AAEA,MAAMC,QAAiC,GAAG,MAAM;AAC9C,QAAM;AAAEC,IAAAA,MAAF;AAAUC,IAAAA,YAAV;AAAwBC,IAAAA;AAAxB,MAAwCL,aAAa,EAA3D;AACA,QAAM,CAACM,YAAD,EAAeC,eAAf,IAAkCT,KAAK,CAACU,QAAN,CAAoB,EAApB,CAAxC;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,KAAK,CAACU,QAAN,CAAe,IAAf,CAAhC;AACAV,EAAAA,KAAK,CAACa,SAAN,CAAgB,MAAM;AACpB,mBAAeC,UAAf,GAA4B;AAC1B,UAAIT,MAAJ,EAAY;AACV,cAAMU,GAAG,GAAG,MAAMV,MAAM,CAACW,WAAP,EAAlB;AACA,YAAID,GAAJ,EAASH,WAAW,CAACG,GAAD,CAAX;AACV;AACF;;AACDD,IAAAA,UAAU;AACX,GARD,EAQG,EARH;AAUA,SACE,4BACGG,YAAY,KAAK,SAAjB,IACC,MAAC,KAAD;AAAO,IAAA,QAAQ,EAAC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAFJ,EAIE,MAAC,QAAD;AACE,IAAA,SAAS,EAAEN,QADb;AAEE,IAAA,gBAAgB,EAAE,MAAMO,KAAN,IAAe;AAC/B,UAAIb,MAAJ,EAAY;AACVC,QAAAA,YAAY,CAAC,IAAD,CAAZ;;AACA,YAAI;AACF,gBAAMS,GAAG,GAAG,MAAMV,MAAM,CAACc,YAAP,CAAoB;AACpCC,YAAAA,MAAM,EAAE;AACNC,cAAAA,IAAI,EAAEH,KAAK,CAACG,IADN;AAENC,cAAAA,OAAO,EAAEJ,KAAK,CAACK,SAFT;AAGNC,cAAAA,KAAK,EAAEN,KAAK,CAACM,KAHP;AAINC,cAAAA,OAAO,EAAEP,KAAK,CAACQ;AAJT,aAD4B;AAOpCC,YAAAA,iBAAiB,EAAE;AAPiB,WAApB,CAAlB;;AASA,cAAIZ,GAAG,IAAIA,GAAG,CAACa,EAAf,EAAmB;AACjB,kBAAMvB,MAAM,CAACwB,UAAP,CAAkB;AACtBC,cAAAA,QAAQ,EAAE,CAACf,GAAG,CAACa,EAAL,CADY;AAEtBG,cAAAA,MAAM,EAAEb,KAAK,CAACc;AAFQ,aAAlB,CAAN;AAID;;AACD1B,UAAAA,YAAY,CAAC,KAAD,CAAZ;AACAG,UAAAA,eAAe,CAAC,SAAD,CAAf;AACD,SAlBD,CAkBE,OAAOwB,KAAP,EAAc;AACdxB,UAAAA,eAAe,CAAC,OAAD,CAAf;AACAF,UAAAA,WAAW,CAAC,IAAD,CAAX;AACD;AACF;AACF,KA5BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CADF;AAqCD,CAnDD;;AAqDA,eAAeH,QAAf","sourcesContent":["import * as React from 'react';\nimport Alert from '@material-ui/lab/Alert';\nimport useRestClient from '../../../hooks/useRestClient';\nimport Register from '../../../components/RegisterVisit';\n\nconst Visitors: React.FunctionComponent = () => {\n  const { client, setIsLoading, setHasError } = useRestClient();\n  const [createStatus, setCreateStatus] = React.useState<any>('');\n  const [gebaeude, setGebaeude] = React.useState(null);\n  React.useEffect(() => {\n    async function getGebaude() {\n      if (client) {\n        const res = await client.getGebauede();\n        if (res) setGebaeude(res);\n      }\n    }\n    getGebaude();\n  }, []);\n\n  return (\n    <>\n      {createStauts === 'success' && (\n        <Alert severity=\"success\">Besuch erfolgreich angelegt.</Alert>\n      )}\n      <Register\n        buildings={gebaeude}\n        createNewVisitor={async props => {\n          if (client) {\n            setIsLoading(true);\n            try {\n              const res = await client.postBesucher({\n                person: {\n                  name: props.name,\n                  vorname: props.firstName,\n                  email: props.email,\n                  telefon: props.phone,\n                },\n                gesundheitsstatus: 'gesund',\n              });\n              if (res && res.id) {\n                await client.postBesuch({\n                  besucher: [res.id],\n                  raeume: props.rooms,\n                });\n              }\n              setIsLoading(false);\n              setCreateStatus('success');\n            } catch (error) {\n              setCreateStatus('error');\n              setHasError(true);\n            }\n          }\n        }}\n      />\n    </>\n  );\n};\n\nexport default Visitors;\n"]},"metadata":{},"sourceType":"module"}