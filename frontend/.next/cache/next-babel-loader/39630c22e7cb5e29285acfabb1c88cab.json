{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stephangilli/projects/besuchernachweis/frontend/components/CancleVisit/index.tsx\";\n\nvar __jsx = React.createElement;\nimport * as React from 'react';\nimport moment from 'moment';\nimport { Grid, Typography } from '@material-ui/core';\nimport InputIcon from '@material-ui/icons/Input';\nimport useRestClient from '../../hooks/useRestClient';\nimport useVisitorSearchReducer from '../../hooks/useVisitorSearchReducer';\nimport useTranslations from '../../hooks/useTranslations';\nimport Table from '../Table';\nimport useStyles from './style';\n\nvar CancleVisit = function CancleVisit() {\n  var reducer = useVisitorSearchReducer();\n\n  var _useRestClient = useRestClient(),\n      client = _useRestClient.client;\n\n  if (!reducer) return null;\n  var state = reducer.state,\n      dispatch = reducer.dispatch;\n\n  function getBesucherByFilter() {\n    var res;\n    return _regeneratorRuntime.async(function getBesucherByFilter$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(client.getBesucherByFilter({\n              name: state.search.name,\n              vorname: state.search.firstName,\n              skip: state.skip,\n              take: state.limit,\n              startzeit: state.search.startDate,\n              endzeit: state.search.endDate\n            }));\n\n          case 2:\n            res = _context.sent;\n            if (res) dispatch({\n              type: 'setVisitors',\n              payload: {\n                rows: res,\n                count: res.length\n              }\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function setBesuchEndzeitpunkt(id) {\n    var res;\n    return _regeneratorRuntime.async(function setBesuchEndzeitpunkt$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(client.setBesuchEndzeitpunkt({\n              besuchId: id,\n              endzeit: moment()\n            }));\n\n          case 2:\n            res = _context2.sent;\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  React.useEffect(function () {\n    getBesucherByFilter();\n  }, []);\n  React.useEffect(function () {\n    getBesucherByFilter();\n  }, [state.page, state.limit]);\n  var classes = useStyles();\n\n  var _useTranslations = useTranslations(),\n      t = _useTranslations.t;\n\n  return __jsx(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(Typography, {\n    variant: \"body1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, t('administration')), __jsx(Typography, {\n    variant: \"h6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, t('visitor-cancle')))), __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, __jsx(Table, {\n    rows: state.rows,\n    rowsPerPageOptions: [25, 50, 100],\n    count: state.count,\n    rowsPerPage: state.limit,\n    page: state.page,\n    onChangePage: function onChangePage(_, newPage) {\n      var newSkip = newPage > state.page ? state.skip + state.limit : state.skip - state.limit;\n      dispatch({\n        type: 'changePage',\n        payload: {\n          skip: newSkip,\n          page: newPage\n        }\n      });\n    },\n    onChangeRowsPerPage: function onChangeRowsPerPage(event) {\n      var limit = Number(event.target.value);\n      dispatch({\n        type: 'changeRowsPerPage',\n        payload: {\n          limit: limit\n        }\n      });\n    },\n    uniqueId: \"id\",\n    toolbarSettings: {\n      title: t('visitor-current-registered'),\n      tooltipSelected: {\n        title: t('visitor-cancle'),\n        icon: __jsx(InputIcon, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 23\n          }\n        }),\n        onClick: function onClick(ids) {\n          return console.log(ids);\n        }\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default CancleVisit;","map":{"version":3,"sources":["/Users/stephangilli/projects/besuchernachweis/frontend/components/CancleVisit/index.tsx"],"names":["React","moment","Grid","Typography","InputIcon","useRestClient","useVisitorSearchReducer","useTranslations","Table","useStyles","CancleVisit","reducer","client","state","dispatch","getBesucherByFilter","name","search","vorname","firstName","skip","take","limit","startzeit","startDate","endzeit","endDate","res","type","payload","rows","count","length","setBesuchEndzeitpunkt","id","besuchId","useEffect","page","classes","t","root","_","newPage","newSkip","event","Number","target","value","title","tooltipSelected","icon","onClick","ids","console","log"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport moment from 'moment';\nimport { Grid, Typography } from '@material-ui/core';\nimport InputIcon from '@material-ui/icons/Input';\nimport useRestClient from '../../hooks/useRestClient';\nimport useVisitorSearchReducer from '../../hooks/useVisitorSearchReducer';\nimport useTranslations from '../../hooks/useTranslations';\nimport Table from '../Table';\nimport useStyles from './style';\n\nconst CancleVisit: React.FunctionComponent = () => {\n  const reducer = useVisitorSearchReducer();\n  const { client } = useRestClient();\n  if (!reducer) return null;\n\n  const { state, dispatch } = reducer;\n\n  async function getBesucherByFilter() {\n    const res = await client.getBesucherByFilter({\n      name: state.search.name,\n      vorname: state.search.firstName,\n      skip: state.skip,\n      take: state.limit,\n      startzeit: state.search.startDate,\n      endzeit: state.search.endDate,\n    });\n    if (res)\n      dispatch({\n        type: 'setVisitors',\n        payload: { rows: res, count: res.length },\n      });\n  }\n\n  async function setBesuchEndzeitpunkt(id: Array<string | number>) {\n    const res = await client.setBesuchEndzeitpunkt({\n      besuchId: id,\n      endzeit: moment(),\n    });\n  }\n\n  React.useEffect(() => {\n    getBesucherByFilter();\n  }, []);\n\n  React.useEffect(() => {\n    getBesucherByFilter();\n  }, [state.page, state.limit]);\n\n  const classes = useStyles();\n  const { t } = useTranslations();\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Typography variant=\"body1\">{t('administration')}</Typography>\n          <Typography variant=\"h6\">{t('visitor-cancle')}</Typography>\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12}>\n          <Table\n            rows={state.rows}\n            rowsPerPageOptions={[25, 50, 100]}\n            count={state.count}\n            rowsPerPage={state.limit}\n            page={state.page}\n            onChangePage={(_: any, newPage: number) => {\n              const newSkip =\n                newPage > state.page\n                  ? state.skip + state.limit\n                  : state.skip - state.limit;\n              dispatch({\n                type: 'changePage',\n                payload: { skip: newSkip, page: newPage },\n              });\n            }}\n            onChangeRowsPerPage={event => {\n              const limit = Number(event.target.value);\n              dispatch({ type: 'changeRowsPerPage', payload: { limit } });\n            }}\n            uniqueId=\"id\"\n            toolbarSettings={{\n              title: t('visitor-current-registered'),\n              tooltipSelected: {\n                title: t('visitor-cancle'),\n                icon: <InputIcon />,\n                onClick: ids => console.log(ids),\n              },\n            }}\n          />\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default CancleVisit;\n"]},"metadata":{},"sourceType":"module"}