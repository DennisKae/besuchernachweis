{"version":3,"file":"static/webpack/static/development/pages/[locale]/visitor/register.js.e5d69c1d77e632ca5b1b.hot-update.js","sources":["webpack:///./components/RegisterVisit/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Grid,\n  Typography,\n  Paper,\n  Input,\n  InputLabel,\n  FormControl,\n  Select,\n  MenuItem,\n  Button,\n} from '@material-ui/core';\nimport Table from '../Table';\nimport useRestClient from '../../hooks/useRestClient';\nimport useTableSearch from '../../hooks/useTableSearch';\nimport useTranslations from '../../hooks/useTranslations';\nimport useStyles from './style';\n\nconst INITIAL_FORM_STATE = {\n  firstName: '',\n  name: '',\n  email: '',\n  phone: '',\n  building: 0,\n  rooms: [],\n  permissionGranted: false,\n};\n\nconst CreateNewUser: React.FunctionComponent<{\n  buildings: any;\n  onRegister: (props: any) => void;\n}> = ({ onRegister, buildings }) => {\n  const { t } = useTranslations();\n  const classes = useStyles();\n  const [formState, setFormState] = React.useState<any>(INITIAL_FORM_STATE);\n  const [rooms, setRooms] = React.useState<any>(null);\n  return (\n    <Paper className={classes.contentContainer}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Input\n            className={classes.input}\n            placeholder={t('register-first-name')}\n            value={formState.firstName}\n            onChange={event =>\n              setFormState({ ...formState, firstName: event.target.value })\n            }\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Input\n            className={classes.input}\n            placeholder={t('register-name')}\n            value={formState.name}\n            onChange={event =>\n              setFormState({ ...formState, name: event.target.value })\n            }\n          />\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Input\n            className={classes.input}\n            type=\"email\"\n            placeholder={t('register-email')}\n            value={formState.email}\n            onChange={event =>\n              setFormState({ ...formState, email: event.target.value })\n            }\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Input\n            className={classes.input}\n            placeholder={t('register-phone')}\n            value={formState.phone}\n            onChange={event =>\n              setFormState({ ...formState, phone: event.target.value })\n            }\n          />\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <FormControl style={{ width: '100%' }}>\n            <InputLabel>Gebäude</InputLabel>\n            <Select\n              value={formState.building}\n              onChange={event => {\n                setFormState({\n                  ...formState,\n                  building: event.target.value,\n                });\n                const rooms = buildings\n                  .filter((b: any) => b.id === event.target.value)\n                  .map((v: any) => v.raeume);\n                if (rooms) setRooms(rooms[0]);\n              }}\n            >\n              {buildings &&\n                buildings.length > 0 &&\n                buildings.map((building: any, index: number) => (\n                  <MenuItem key={index} value={building.id}>\n                    {building.bezeichnung}\n                  </MenuItem>\n                ))}\n            </Select>\n          </FormControl>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <FormControl style={{ width: '100%' }}>\n            <InputLabel>{t('property-rooms')}</InputLabel>\n            {rooms && rooms.length > 0 && (\n              <Select\n                value={formState.rooms}\n                onChange={event => {\n                  setFormState({\n                    ...formState,\n                    rooms: event.target.value,\n                  });\n                }}\n                multiple\n                input={<Input />}\n              >\n                {rooms.map((room: any, index: number) => {\n                  return (\n                    <MenuItem key={index} value={room.id}>\n                      {room.bezeichnung}\n                    </MenuItem>\n                  );\n                })}\n              </Select>\n            )}\n          </FormControl>\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => {\n              onRegister(formState);\n              setFormState(INITIAL_FORM_STATE);\n            }}\n          >\n            {t('register')}\n          </Button>\n        </Grid>\n      </Grid>\n    </Paper>\n  );\n};\n\nconst RegisterVisit: React.FunctionComponent = () => {\n  // hooks\n  const classes = useStyles();\n  const reducer = useTableSearch<any>();\n  const { t } = useTranslations();\n  const { client } = useRestClient();\n  if (!reducer) return null;\n\n  const { state, dispatch } = reducer;\n\n  async function getBesucherByFilter() {\n    const res = await client.getBesucherByFilter({\n      skip: state.skip,\n      take: state.limit,\n    });\n    console.log(res);\n    if (res)\n      dispatch({\n        type: 'setRows',\n        payload: { rows: res, count: res.length },\n      });\n  }\n\n  React.useEffect(() => {\n    getBesucherByFilter();\n  }, []);\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <Typography variant=\"body1\">{t('administration')}</Typography>\n          <Typography variant=\"h6\">{t('visitor-register')}</Typography>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Typography variant=\"body1\">Registrieter Besucher</Typography>\n          <Typography variant=\"h6\">Besucher auswählen</Typography>\n        </Grid>\n      </Grid>\n      <Grid container spacing={4}>\n        <Grid item xs={12} sm={6}>\n          <CreateNewUser onRegister={() => {}} buildings={[]} />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <Table\n            rows={state.rows}\n            rowsPerPageOptions={[25, 50, 100]}\n            count={1}\n            rowsPerPage={25}\n            page={0}\n            onChangePage={() => {}}\n            onChangeRowsPerPage={() => {}}\n            onRowClick={() => {}}\n            uniqueId=\"id\"\n            toolbarSettings={{\n              title: 'Besucher',\n            }}\n          />\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default RegisterVisit;\n"],"mappings":"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","sourceRoot":""}